#!/bin/bash

# BEGIN-INCLUDE LICENSE-header
# END-INCLUDE

SHAREDIR="$(dirname "$0")/.."
source "$SHAREDIR/lib/logging.bash"

declare -a INPUT_FILES
INPUT_FILES=()


## ## ARGUMENTS
##
## ### `<stylesheet>`
## 
## required
##
parse_arguments() {
    XSLT="$1"
    shift

    ##
    ## * `<source-files>` - 1..n. Pass a single `-` to read from `STDIN`
    ##
    if [[ "$1" == "-" ]];then
        INPUT_FILES+=(/dev/stdin)
        shift
    fi
    while [[ ! -z "$1" ]];do
        if [[ ! -e "$1" ]];then
            _error "No such file: '$1'"
        fi
        INPUT_FILES+=("$1")
        shift
    done
}

parse_options() {
    while [[ "$1" = -?* ]];do
        case "$1" in
            ## ### --synopsis
            ##
            --synopsis)
                echo "Transform XML with XSLT"
                ;;
        esac
        shift
    done
}

parse_options "$@"
parse_arguments "$@"

_debug 0 "XSLT: '$XSLT'"
_debug 0 "INPUT_FILES: '${INPUT_FILES[*]}'"
